<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading Spinner Test</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .test-container {
            padding: 20px;
            text-align: center;
        }
        .test-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
        }
        .loading-timer {
            font-size: 12px;
            color: #888;
            font-weight: 400;
            margin-top: 5px;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="chatbot-container">
        <div class="chat-header">
            <h1>Loading Spinner Test</h1>
        </div>
        
        <div class="test-container">
            <button class="test-button" onclick="showSpinner()">Show Spinner</button>
            <button class="test-button" onclick="hideSpinner()">Hide Spinner</button>
        </div>
        
        <div class="loading-indicator" id="loadingIndicator" style="display: none;">
            <div class="spinner-container">
                <svg class="loading-spinner" width="40" height="40" viewBox="0 0 40 40">
                    <circle cx="20" cy="20" r="16" stroke="#667eea" stroke-width="4" fill="none" 
                            stroke-linecap="round" stroke-dasharray="100" stroke-dashoffset="100">
                        <animate attributeName="stroke-dasharray" 
                                dur="2s" 
                                values="0 100;50 100;100 100" 
                                repeatCount="indefinite"/>
                        <animate attributeName="stroke-dashoffset" 
                                dur="2s" 
                                values="100;50;0" 
                                repeatCount="indefinite"/>
                        <animateTransform attributeName="transform"
                                        type="rotate"
                                        values="0 20 20;360 20 20"
                                        dur="1s"
                                        repeatCount="indefinite"/>
                    </circle>
                </svg>
                <div class="loading-text">
                    답변을 생성하고 있습니다...
                    <div class="loading-timer">(<span id="loadingTimer">0.0</span>초)</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const loadingIndicator = document.getElementById('loadingIndicator');
        
        // 로딩 타이머 변수
        let loadingStartTime = null;
        let loadingTimer = null;

        // 로딩 표시 함수
        function showSpinner() {
            loadingIndicator.style.display = 'block';
            
            // 타이머 시작
            loadingStartTime = Date.now();
            updateLoadingTimer();
            loadingTimer = setInterval(updateLoadingTimer, 100); // 0.1초마다 업데이트
            
            // 5초 후 자동 숨김 (데모용)
            setTimeout(() => {
                hideSpinner();
            }, 5000);
        }
        
        function hideSpinner() {
            loadingIndicator.style.display = 'none';
            
            // 타이머 정리
            if (loadingTimer) {
                clearInterval(loadingTimer);
                loadingTimer = null;
            }
            loadingStartTime = null;
        }

        // 로딩 시간 업데이트 함수
        function updateLoadingTimer() {
            if (loadingStartTime) {
                const elapsed = (Date.now() - loadingStartTime) / 1000;
                const timerElement = document.getElementById('loadingTimer');
                if (timerElement) {
                    timerElement.textContent = elapsed.toFixed(1);
                }
            }
        }
    </script>
</body>
</html>